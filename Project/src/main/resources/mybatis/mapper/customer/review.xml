<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="review">
    <!-- 구매확정 상품 리뷰 작성 -->
    <insert id="insert_review" parameterType="user.vo.customer.BoardVO">
        INSERT INTO board(cus_no, prod_no, bname, content, additional_images, gender, score, write_date, order_code, is_del)
        VALUES(#{cus_no}, #{prod_no}, 'review', #{content}, #{additional_images}, #{gender}, #{score}, NOW(), #{order_code}, 0)
    </insert>

    <!-- 작성한 리뷰 찾기 -->
    <select id="select_review" resultType="boolean" parameterType="map">
        SELECT EXISTS (
        SELECT *
        FROM board
        WHERE cus_no = #{cus_no} AND prod_no = #{prod_no} AND bname = 'review'
        ) AS record_exists
    </select>
</mapper>